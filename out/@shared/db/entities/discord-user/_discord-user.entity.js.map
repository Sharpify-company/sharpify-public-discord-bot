{"version":3,"sources":["../../../../../src/@shared/db/entities/discord-user/_discord-user.entity.ts"],"sourcesContent":["import { StoreProps } from \"@/@shared/sharpify/api\";\r\nimport { AfterLoad, BaseEntity, Column, Entity, PrimaryColumn } from \"typeorm\";\r\nimport { CartEmbedded } from \"./cart.embedded\";\r\nimport { PersonalInfoEmbedded } from \"./personal-info.embedded\";\r\n\r\n@Entity(\"discordUsers\")\r\nexport class DiscordUserEntity extends BaseEntity {\r\n\t@PrimaryColumn({ name: \"id\", type: \"text\" })\r\n\tid!: string;\r\n\r\n\t@Column(() => CartEmbedded, { prefix: false })\r\n\tcart!: CartEmbedded;\r\n\r\n\t@Column(() => PersonalInfoEmbedded, { prefix: false })\r\n\tpersonalInfo!: PersonalInfoEmbedded;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tstatic createUser(props: DiscordUserEntity.Input) {\r\n\t\tconst defaultProps: DiscordUserEntity.Props = {\r\n\t\t\t...props,\r\n\t\t\tcart: CartEmbedded.createDefault(),\r\n\t\t\tpersonalInfo: PersonalInfoEmbedded.createDefault(),\r\n\t\t};\r\n\t\tconst entity = new DiscordUserEntity();\r\n\t\tObject.assign(entity, defaultProps);\r\n\t\tentity.afterLoad();\r\n\t}\r\n\r\n\t@AfterLoad()\r\n\tprivate afterLoad() {\r\n\t\tthis.cart.discordUser = this;\r\n\t\tthis.personalInfo.discordUser = this;\r\n\t}\r\n}\r\n\r\nexport namespace DiscordUserEntity {\r\n\texport type Input = {\r\n\t\tid: string;\r\n\t};\r\n\r\n\texport type CartItemProps = CartEmbedded.CartItem;\r\n\r\n\texport type Props = {\r\n\t\tid: string;\r\n\t\tcart: CartEmbedded;\r\n\t\tpersonalInfo: PersonalInfoEmbedded;\r\n\t};\r\n}\r\n"],"names":["DiscordUserEntity","BaseEntity","createUser","props","defaultProps","cart","CartEmbedded","createDefault","personalInfo","PersonalInfoEmbedded","entity","Object","assign","afterLoad","discordUser","name","type","prefix"],"mappings":";;;;+BAMaA;;;eAAAA;;;yBALwD;8BACxC;sCACQ;;;;;;;;;;AAG9B,IAAA,AAAMA,oBAAN,MAAMA,0BAA0BC,mBAAU;IAchD,OAAOC,WAAWC,KAA8B,EAAE;QACjD,MAAMC,eAAwC;YAC7C,GAAGD,KAAK;YACRE,MAAMC,0BAAY,CAACC,aAAa;YAChCC,cAAcC,0CAAoB,CAACF,aAAa;QACjD;QACA,MAAMG,SAAS,IAAIV;QACnBW,OAAOC,MAAM,CAACF,QAAQN;QACtBM,OAAOG,SAAS;IACjB;IAGQA,YAAY;QACnB,IAAI,CAACR,IAAI,CAACS,WAAW,GAAG,IAAI;QAC5B,IAAI,CAACN,YAAY,CAACM,WAAW,GAAG,IAAI;IACrC;IAnBA,aAAc;QACb,KAAK;IACN;AAkBD;;;QA7BkBC,MAAM;QAAMC,MAAM;;;;;6BAGrBV,0BAAY;QAAIW,QAAQ;;;;;6BAGxBR,0CAAoB;QAAIQ,QAAQ"}