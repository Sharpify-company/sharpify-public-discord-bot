{"version":3,"sources":["../src/log-channel.service.ts"],"sourcesContent":["import { ExternalEventsEntity } from \"@/@shared/db/entities\";\r\nimport { Sharpify } from \"@/@shared/sharpify\";\r\nimport { Inject, Injectable } from \"@nestjs/common\";\r\nimport { Cron, CronExpression } from \"@nestjs/schedule\";\r\nimport { Client, MessageCreateOptions, MessagePayload, TextChannel } from \"discord.js\";\r\nimport { dotEnv } from \"./@shared/lib\";\r\n\r\n@Injectable()\r\nexport class LogChannel {\r\n\tconstructor(@Inject(Client) private readonly client: Client) {}\r\n\tasync sendMessage(options: string | MessagePayload | MessageCreateOptions) {\r\n\t\tif (!dotEnv.LOG_CHANNEL_ID) return;\r\n\t\tconst channel = (await this.client?.channels.fetch(dotEnv.LOG_CHANNEL_ID).catch(() => null)) as TextChannel;\r\n\t\tif (!channel || !channel.isTextBased()) return;\r\n\t\tawait channel.send(options).catch((err) => {\r\n\t\t\tconsole.error(\"‚ùå Failed to send log message:\", err);\r\n\t\t});\r\n\t}\r\n}"],"names":["LogChannel","sendMessage","options","dotEnv","LOG_CHANNEL_ID","channel","client","channels","fetch","catch","isTextBased","send","err","console","error"],"mappings":";;;;+BAQaA;;;eAAAA;;;wBANsB;yBAEuC;qBACnD;;;;;;;;;;;;;;;AAGhB,IAAA,AAAMA,aAAN,MAAMA;IAEZ,MAAMC,YAAYC,OAAuD,EAAE;QAC1E,IAAI,CAACC,WAAM,CAACC,cAAc,EAAE;QAC5B,MAAMC,UAAW,MAAM,IAAI,CAACC,MAAM,EAAEC,SAASC,MAAML,WAAM,CAACC,cAAc,EAAEK,MAAM,IAAM;QACtF,IAAI,CAACJ,WAAW,CAACA,QAAQK,WAAW,IAAI;QACxC,MAAML,QAAQM,IAAI,CAACT,SAASO,KAAK,CAAC,CAACG;YAClCC,QAAQC,KAAK,CAAC,iCAAiCF;QAChD;IACD;IARA,YAAY,AAAiCN,MAAc,CAAE;aAAhBA,SAAAA;IAAiB;AAS/D"}