{"version":3,"sources":["../../../../../../src/bot/checkout/components/checkout-card/components/go-back-to-main-section-button.ts"],"sourcesContent":["import { forwardRef, Inject, Injectable } from \"@nestjs/common\";\r\nimport {\r\n\tModal,\r\n\tContext,\r\n\tSlashCommand,\r\n\tSlashCommandContext,\r\n\tCtx,\r\n\tModalContext,\r\n\tStringSelect,\r\n\tStringSelectContext,\r\n\tSelectedStrings,\r\n\tButton,\r\n} from \"necord\";\r\nimport {\r\n\tActionRowBuilder,\r\n\tButtonBuilder,\r\n\tButtonInteraction,\r\n\tButtonStyle,\r\n\tCacheType,\r\n\tChatInputCommandInteraction,\r\n\tClient,\r\n\tEmbedBuilder,\r\n\tMessage,\r\n\tModalActionRowComponentBuilder,\r\n\tModalBuilder,\r\n\tModalSubmitInteraction,\r\n\tTextChannel,\r\n\tTextInputBuilder,\r\n\tTextInputStyle,\r\n} from \"discord.js\";\r\nimport { BotConfig } from \"@/config\";\r\nimport { ProductProps } from \"@/@shared/sharpify/api\";\r\nimport { formatPrice } from \"@/@shared/lib\";\r\nimport TurndownService from \"turndown\";\r\nimport { DiscordUserEntity, EmojiEntity, ProductEntity } from \"@/@shared/db/entities\";\r\nimport { ValidateDatabaseCartItemsHelper } from \"../../../helpers\";\r\nimport { formatCheckoutCartItemNameHelper, getCheckoutCartItemsHelper } from \"../helper\";\r\nimport { SectionManagerHandler } from \"../section-manager\";\r\nimport { WrapperType } from \"@/@shared/types\";\r\nimport { FindEmojiHelper } from \"@/@shared/helpers\";\r\n\r\n@Injectable()\r\nexport class GoBackToMainSectionButionComponent {\r\n\tconstructor(\r\n\t\t@Inject(Client) private readonly client: Client,\r\n\t\t@Inject(forwardRef(() => SectionManagerHandler))\r\n\t\tprivate readonly sectionManagerHandler: WrapperType<SectionManagerHandler>,\r\n\t) {}\r\n\r\n\t@Button(\"go_back_to_checkout_main_section\")\r\n\tprivate async handleButtonClicked(@Context() [interaction]: [ButtonInteraction]) {\r\n\t\tconst result = await this.sectionManagerHandler.setSection({\r\n\t\t\tdiscordUserId: interaction.user.id,\r\n\t\t\tsection: \"MAIN\",\r\n\t\t});\r\n\t\tawait interaction.deferUpdate();\r\n\t\tawait interaction.message.edit(result as any);\r\n\t}\r\n\r\n\tasync createButton() {\r\n\t\tconst backEmoji = await FindEmojiHelper({ client: this.client, name: \"Sharpify_letsgo\" });\r\n\r\n\t\tconst backToSummaryButton = new ButtonBuilder()\r\n\t\t\t.setCustomId(\"go_back_to_checkout_main_section\")\r\n\t\t\t.setLabel(\"Voltar ao resumo do pedido\")\r\n\t\t\t.setStyle(ButtonStyle.Secondary);\r\n\t\tbackEmoji && backToSummaryButton.setEmoji({ id: backEmoji.id });\r\n\t\treturn { backToSummaryButton };\r\n\t}\r\n}\r\n"],"names":["GoBackToMainSectionButionComponent","handleButtonClicked","interaction","result","sectionManagerHandler","setSection","discordUserId","user","id","section","deferUpdate","message","edit","createButton","backEmoji","FindEmojiHelper","client","name","backToSummaryButton","ButtonBuilder","setCustomId","setLabel","setStyle","ButtonStyle","Secondary","setEmoji","SectionManagerHandler"],"mappings":";;;;+BA0CaA;;;eAAAA;;;wBA1CkC;wBAYxC;yBAiBA;gCAQ+B;uBACV;yBACI;;;;;;;;;;;;;;;AAGzB,IAAA,AAAMA,qCAAN,MAAMA;IAOZ,MACcC,oBAAoB,AAAW,CAACC,YAAiC,EAAE;QAChF,MAAMC,SAAS,MAAM,IAAI,CAACC,qBAAqB,CAACC,UAAU,CAAC;YAC1DC,eAAeJ,YAAYK,IAAI,CAACC,EAAE;YAClCC,SAAS;QACV;QACA,MAAMP,YAAYQ,WAAW;QAC7B,MAAMR,YAAYS,OAAO,CAACC,IAAI,CAACT;IAChC;IAEA,MAAMU,eAAe;QACpB,MAAMC,YAAY,MAAMC,IAAAA,wBAAe,EAAC;YAAEC,QAAQ,IAAI,CAACA,MAAM;YAAEC,MAAM;QAAkB;QAEvF,MAAMC,sBAAsB,IAAIC,sBAAa,GAC3CC,WAAW,CAAC,oCACZC,QAAQ,CAAC,8BACTC,QAAQ,CAACC,oBAAW,CAACC,SAAS;QAChCV,aAAaI,oBAAoBO,QAAQ,CAAC;YAAEjB,IAAIM,UAAUN,EAAE;QAAC;QAC7D,OAAO;YAAEU;QAAoB;IAC9B;IAzBA,YACC,AAAiCF,MAAc,EAC/C,AACiBZ,qBAAyD,CACzE;aAHgCY,SAAAA;aAEhBZ,wBAAAA;IACf;AAsBJ;;;;;;;;;;;;;iEAxB2BsB,qCAAqB"}