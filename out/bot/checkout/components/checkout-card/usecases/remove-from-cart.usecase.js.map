{"version":3,"sources":["../../../../../../src/bot/checkout/components/checkout-card/usecases/remove-from-cart.usecase.ts"],"sourcesContent":["import { Sharpify } from \"@/@shared/sharpify\";\r\nimport {\r\n\tActionRowBuilder,\r\n\tButtonBuilder,\r\n\tButtonInteraction,\r\n\tButtonStyle,\r\n\tCacheType,\r\n\tChannelType,\r\n\tEmbedBuilder,\r\n\tPermissionsBitField,\r\n} from \"discord.js\";\r\nimport { dotEnv } from \"@/@shared/lib\";\r\n\r\nimport { ValidateDatabaseCartItemsHelper } from \"@/bot/checkout/helpers\";\r\nimport { Injectable } from \"@nestjs/common\";\r\nimport { DiscordUserEntity } from \"@/@shared/db/entities\";\r\n\r\nexport class RemoveFromCartUsecase {\r\n\tstatic async execute({\r\n\t\tdiscordUserId,\r\n\t\tproductId,\r\n\t\tproductItemId,\r\n\t}: {\r\n\t\tproductId: string;\r\n\t\tproductItemId: string;\r\n\t\tdiscordUserId: string;\r\n\t}): Promise<{ cartIsEmpty: boolean }> {\r\n\t\tconst userEntity = await DiscordUserEntity.findOneBy({ id: discordUserId });\r\n\t\tif (!userEntity) return { cartIsEmpty: true };\r\n\r\n\t\tawait userEntity.cart.removeFromCart({\r\n\t\t\tproductId,\r\n\t\t\tproductItemId,\r\n\t\t});\r\n\r\n\t\treturn { cartIsEmpty: userEntity.cart.isCartEmpty() };\r\n\t}\r\n}\r\n"],"names":["RemoveFromCartUsecase","execute","discordUserId","productId","productItemId","userEntity","DiscordUserEntity","findOneBy","id","cartIsEmpty","cart","removeFromCart","isCartEmpty"],"mappings":";;;;+BAiBaA;;;eAAAA;;;0BAFqB;AAE3B,IAAA,AAAMA,wBAAN,MAAMA;IACZ,aAAaC,QAAQ,EACpBC,aAAa,EACbC,SAAS,EACTC,aAAa,EAKb,EAAqC;QACrC,MAAMC,aAAa,MAAMC,2BAAiB,CAACC,SAAS,CAAC;YAAEC,IAAIN;QAAc;QACzE,IAAI,CAACG,YAAY,OAAO;YAAEI,aAAa;QAAK;QAE5C,MAAMJ,WAAWK,IAAI,CAACC,cAAc,CAAC;YACpCR;YACAC;QACD;QAEA,OAAO;YAAEK,aAAaJ,WAAWK,IAAI,CAACE,WAAW;QAAG;IACrD;AACD"}