{"version":3,"sources":["../../../src/workers/usecases/handle-external-event-created.usecase.ts"],"sourcesContent":["import { ExternalEventsEntity, ProductEntity } from \"@/@shared/db/entities\";\r\nimport { ProductProps } from \"@/@shared/sharpify/api\";\r\nimport { ProductCardComponent } from \"@/bot/checkout/components\";\r\nimport { Inject, Injectable } from \"@nestjs/common\";\r\nimport { Client, TextChannel } from \"discord.js\";\r\nimport {} from \"necord\";\r\nimport { HandleProductEvent } from \"./handle-product-event\";\r\nimport { HandleCheckoutEvent } from \"./handle-checkout-event\";\r\n\r\n@Injectable()\r\nexport class HandleExternalEventCreatedUsecase {\r\n\tconstructor(\r\n\t\t@Inject(Client) private readonly client: Client,\r\n\t\tprivate readonly handleProductEvent: HandleProductEvent,\r\n\t\tprivate readonly handleCheckoutEvent: HandleCheckoutEvent,\r\n\t) {}\r\n\r\n\tasync execute(event: ExternalEventsEntity) {\r\n\t\tif (event.eventName === \"PRODUCT_DELETED\" || event.eventName === \"PRODUCT_UPDATED\") {\r\n\t\t\tawait this.handleProductEvent.create(event);\r\n\t\t}\r\n\t\tif (event.eventName === \"ORDER_APPROVED\" || event.eventName === \"ORDER_CANCELLED\") {\r\n\t\t\tawait this.handleCheckoutEvent.create(event);\r\n\t\t}\r\n\t\tawait event.remove();\r\n\t}\r\n}\r\n"],"names":["HandleExternalEventCreatedUsecase","execute","event","eventName","handleProductEvent","create","handleCheckoutEvent","remove","client"],"mappings":";;;;+BAUaA;;;eAAAA;;;wBAPsB;yBACC;QACrB;oCACoB;qCACC;;;;;;;;;;;;;;;AAG7B,IAAA,AAAMA,oCAAN,MAAMA;IAOZ,MAAMC,QAAQC,KAA2B,EAAE;QAC1C,IAAIA,MAAMC,SAAS,KAAK,qBAAqBD,MAAMC,SAAS,KAAK,mBAAmB;YACnF,MAAM,IAAI,CAACC,kBAAkB,CAACC,MAAM,CAACH;QACtC;QACA,IAAIA,MAAMC,SAAS,KAAK,oBAAoBD,MAAMC,SAAS,KAAK,mBAAmB;YAClF,MAAM,IAAI,CAACG,mBAAmB,CAACD,MAAM,CAACH;QACvC;QACA,MAAMA,MAAMK,MAAM;IACnB;IAdA,YACC,AAAiCC,MAAc,EAC/C,AAAiBJ,kBAAsC,EACvD,AAAiBE,mBAAwC,CACxD;aAHgCE,SAAAA;aAChBJ,qBAAAA;aACAE,sBAAAA;IACf;AAWJ"}