{"version":3,"sources":["../../../../../../src/bot/preferences/commands/configure-preferences/components/_build-preference-configure.ts"],"sourcesContent":["import { forwardRef, Inject, Injectable } from \"@nestjs/common\";\r\nimport { Modal, Context, SlashCommand, SlashCommandContext, Ctx, ModalContext } from \"necord\";\r\nimport {\r\n\tActionRowBuilder,\r\n\tButtonBuilder,\r\n\tButtonStyle,\r\n\tCacheType,\r\n\tChatInputCommandInteraction,\r\n\tClient,\r\n\tEmbedBuilder,\r\n\tInteractionReplyOptions,\r\n\tInteractionResponse,\r\n\tMessagePayload,\r\n\tModalActionRowComponentBuilder,\r\n\tModalBuilder,\r\n\tModalSubmitInteraction,\r\n\tTextInputBuilder,\r\n\tTextInputStyle,\r\n} from \"discord.js\";\r\nimport { BotConfig } from \"@/config\";\r\nimport { ProductProps } from \"@/@shared/sharpify/api\";\r\nimport { dotEnv, formatPrice } from \"@/@shared/lib\";\r\nimport TurndownService from \"turndown\";\r\nimport { getLocalStoreConfig } from \"@/@shared/sharpify\";\r\nimport { SalesPrivateLogButtonComponent } from \"./sales-private-log/_sales-private-log.button\";\r\n// import { EnablePublicLogButtonComponent } from \"./enable-public-log.button\";\r\nimport { WrapperType } from \"@/@shared/types\";\r\nimport { BuildSalesPrivateLogSection } from \"./sales-private-log/_build-sales-private-log-section\";\r\nimport { SalesPublicLogButtonComponent } from \"./sales-public-log/_sales-public-log.button\";\r\nimport { BuildSalesPublicLogSection } from \"./sales-public-log/_build-sales-public-log-section\";\r\nimport { FailLogButtonComponent } from \"./fail-log/_fail-log.button\";\r\nimport { BuildFailLogSection } from \"./fail-log/_build-fail-log-section\";\r\nimport { ConfirmDeliveryLogButtonComponent } from \"./confirm-delivery-log/_confirm-delivery-log.button\";\r\nimport { BuildConfirmDeliveryLogSection } from \"./confirm-delivery-log/_build-confirm-delivery-section\";\r\nimport { BuildFeedbackPublicLogSection } from \"./feedback-public-log/_build-feedback-public-log-section\";\r\nimport { FeedbackPublicLogButtonComponent } from \"./feedback-public-log/_feedback-public-log.button\";\r\nimport { FeedbackPrivateLogButtonComponent } from \"./feedback-private-log/_feedback-private-log.button\";\r\nimport { BuildFeedbackPrivateLogSection } from \"./feedback-private-log/_build-feedback-private-log-section\";\r\n\r\n@Injectable()\r\nexport class BuildPreferenceConfigure {\r\n\tconstructor(\r\n\t\t@Inject(forwardRef(() => SalesPrivateLogButtonComponent))\r\n\t\tprivate readonly salesPrivateLogButtonComponent: SalesPrivateLogButtonComponent,\r\n\r\n\t\t@Inject(forwardRef(() => SalesPublicLogButtonComponent))\r\n\t\tprivate readonly salesPublicLogButtonComponent: SalesPublicLogButtonComponent,\r\n\r\n\t\t@Inject(forwardRef(() => FailLogButtonComponent))\r\n\t\tprivate readonly failLogButtonComponent: WrapperType<FailLogButtonComponent>,\r\n\r\n\t\t@Inject(forwardRef(() => ConfirmDeliveryLogButtonComponent))\r\n\t\tprivate readonly confirmDeliveryLogButtonComponent: WrapperType<ConfirmDeliveryLogButtonComponent>,\r\n\r\n\t\t@Inject(forwardRef(() => FeedbackPublicLogButtonComponent))\r\n\t\tprivate readonly feedbackPublicLogButtonComponent: WrapperType<FeedbackPublicLogButtonComponent>,\r\n\r\n\t\t@Inject(forwardRef(() => FeedbackPrivateLogButtonComponent))\r\n\t\tprivate readonly feedbackPrivateLogButtonComponent: WrapperType<FeedbackPrivateLogButtonComponent>,\r\n\r\n\t\t@Inject(forwardRef(() => BuildSalesPrivateLogSection))\r\n\t\tprivate readonly buildSalesPrivateLogSection: WrapperType<BuildSalesPrivateLogSection>,\r\n\r\n\t\t@Inject(forwardRef(() => BuildSalesPublicLogSection))\r\n\t\tprivate readonly buildSalesPublicLogSection: WrapperType<BuildSalesPublicLogSection>,\r\n\r\n\t\t@Inject(forwardRef(() => BuildFailLogSection))\r\n\t\tprivate readonly buildFailLogSection: WrapperType<BuildFailLogSection>,\r\n\r\n\t\t@Inject(forwardRef(() => BuildConfirmDeliveryLogSection))\r\n\t\tprivate readonly buildConfirmDeliveryLogSection: WrapperType<BuildConfirmDeliveryLogSection>,\r\n\r\n\t\t@Inject(forwardRef(() => BuildFeedbackPublicLogSection))\r\n\t\tprivate readonly buildFeedbackPublicLogSection: WrapperType<BuildFeedbackPublicLogSection>,\r\n\r\n\t\t@Inject(forwardRef(() => BuildFeedbackPrivateLogSection))\r\n\t\tprivate readonly buildFeedbackPrivateLogSection: WrapperType<BuildFeedbackPrivateLogSection>,\r\n\r\n\t\t@Inject(Client) private readonly client: Client,\r\n\t) {}\r\n\r\n\tasync build({\r\n\t\tsection,\r\n\t}: {\r\n\t\tsection:\r\n\t\t\t| \"MAIN\"\r\n\t\t\t| \"SALES_PRIVATE_LOG\"\r\n\t\t\t| \"SALES_PUBLIC_LOG\"\r\n\t\t\t| \"FAIL_LOG\"\r\n\t\t\t| \"CONFIRM_DELIVERY_LOG\"\r\n\t\t\t| \"FEEDBACK_PUBLIC_LOG\"\r\n\t\t\t| \"FEEDBACK_PRIVATE_LOG\";\r\n\t}): Promise<string | InteractionReplyOptions | MessagePayload> {\r\n\t\tif (section === \"SALES_PRIVATE_LOG\") {\r\n\t\t\treturn this.buildSalesPrivateLogSection.build();\r\n\t\t}\r\n\t\tif (section === \"SALES_PUBLIC_LOG\") {\r\n\t\t\treturn this.buildSalesPublicLogSection.build();\r\n\t\t}\r\n\r\n\t\tif (section === \"FAIL_LOG\") {\r\n\t\t\treturn this.buildFailLogSection.build();\r\n\t\t}\r\n\r\n\t\tif (section === \"CONFIRM_DELIVERY_LOG\") {\r\n\t\t\treturn this.buildConfirmDeliveryLogSection.build();\r\n\t\t}\r\n\r\n\t\tif (section === \"FEEDBACK_PUBLIC_LOG\") {\r\n\t\t\treturn this.buildFeedbackPublicLogSection.build();\r\n\t\t}\r\n\r\n\t\tif (section === \"FEEDBACK_PRIVATE_LOG\") {\r\n\t\t\treturn this.buildFeedbackPrivateLogSection.build();\r\n\t\t}\r\n\r\n\t\tconst emmbed = new EmbedBuilder()\r\n\t\t\t.setColor(BotConfig.color)\r\n\t\t\t.setTitle(\"Configura√ß√£o de Prefer√™ncias\")\r\n\t\t\t.setDescription(\"Aqui voc√™ pode configurar as preferencias do bot como logs, eventos etc.\");\r\n\r\n\t\tconst { salesPrivateLogButton } = await this.salesPrivateLogButtonComponent.createButton();\r\n\t\tconst { salesPublicLogButton } = await this.salesPublicLogButtonComponent.createButton();\r\n\t\tconst { failLogButton } = await this.failLogButtonComponent.createButton();\r\n\t\tconst { confirmDeliveryLogButton } = await this.confirmDeliveryLogButtonComponent.createButton();\r\n\t\tconst { feedbackPublicLogButton } = await this.feedbackPublicLogButtonComponent.createButton();\r\n\t\tconst { feedbackPrivateLogButton } = await this.feedbackPrivateLogButtonComponent.createButton();\r\n\r\n\t\treturn {\r\n\t\t\tembeds: [emmbed],\r\n\t\t\tcomponents: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tcomponents: [\r\n\t\t\t\t\t\tnew ButtonBuilder()\r\n\t\t\t\t\t\t\t.setCustomId(\"title_logs\")\r\n\t\t\t\t\t\t\t.setLabel(\"üì¶ Logs de Vendas\")\r\n\t\t\t\t\t\t\t.setStyle(ButtonStyle.Primary)\r\n\t\t\t\t\t\t\t.setDisabled(true),\r\n\t\t\t\t\t\tsalesPrivateLogButton,\r\n\t\t\t\t\t\tsalesPublicLogButton,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tcomponents: [\r\n\t\t\t\t\t\tnew ButtonBuilder()\r\n\t\t\t\t\t\t\t.setCustomId(\"title_feedback\")\r\n\t\t\t\t\t\t\t.setLabel(\"‚≠ê Feedback\")\r\n\t\t\t\t\t\t\t.setStyle(ButtonStyle.Primary)\r\n\t\t\t\t\t\t\t.setDisabled(true),\r\n\t\t\t\t\t\tfeedbackPrivateLogButton,\r\n\t\t\t\t\t\tfeedbackPublicLogButton,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tcomponents: [\r\n\t\t\t\t\t\tnew ButtonBuilder()\r\n\t\t\t\t\t\t\t.setCustomId(\"title_entrega\")\r\n\t\t\t\t\t\t\t.setLabel(\"üöö Entrega e falhas\")\r\n\t\t\t\t\t\t\t.setStyle(ButtonStyle.Primary)\r\n\t\t\t\t\t\t\t.setDisabled(true),\r\n\t\t\t\t\t\tconfirmDeliveryLogButton,\r\n\t\t\t\t\t\tfailLogButton,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tflags: [\"Ephemeral\"],\r\n\t\t};\r\n\t}\r\n}\r\n"],"names":["BuildPreferenceConfigure","build","section","buildSalesPrivateLogSection","buildSalesPublicLogSection","buildFailLogSection","buildConfirmDeliveryLogSection","buildFeedbackPublicLogSection","buildFeedbackPrivateLogSection","emmbed","EmbedBuilder","setColor","BotConfig","color","setTitle","setDescription","salesPrivateLogButton","salesPrivateLogButtonComponent","createButton","salesPublicLogButton","salesPublicLogButtonComponent","failLogButton","failLogButtonComponent","confirmDeliveryLogButton","confirmDeliveryLogButtonComponent","feedbackPublicLogButton","feedbackPublicLogButtonComponent","feedbackPrivateLogButton","feedbackPrivateLogButtonComponent","embeds","components","type","ButtonBuilder","setCustomId","setLabel","setStyle","ButtonStyle","Primary","setDisabled","flags","client","SalesPrivateLogButtonComponent","SalesPublicLogButtonComponent","FailLogButtonComponent","ConfirmDeliveryLogButtonComponent","FeedbackPublicLogButtonComponent","FeedbackPrivateLogButtonComponent","BuildSalesPrivateLogSection","BuildSalesPublicLogSection","BuildFailLogSection","BuildConfirmDeliveryLogSection","BuildFeedbackPublicLogSection","BuildFeedbackPrivateLogSection"],"mappings":"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"}