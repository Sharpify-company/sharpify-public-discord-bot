{"version":3,"sources":["../../../../../../src/bot/roles-settings/commands/configure-roles/components/remove-all-roles.button.ts"],"sourcesContent":["import { forwardRef, Inject, Injectable } from \"@nestjs/common\";\r\nimport {\r\n\tModal,\r\n\tContext,\r\n\tSlashCommand,\r\n\tSlashCommandContext,\r\n\tCtx,\r\n\tModalContext,\r\n\tStringSelect,\r\n\tStringSelectContext,\r\n\tSelectedStrings,\r\n\tButton,\r\n\tComponentParam,\r\n\tModalParam,\r\n} from \"necord\";\r\nimport {\r\n\tActionRowBuilder,\r\n\tButtonBuilder,\r\n\tButtonInteraction,\r\n\tButtonStyle,\r\n\tCacheType,\r\n\tChatInputCommandInteraction,\r\n\tClient,\r\n\tEmbedBuilder,\r\n\tLabelBuilder,\r\n\tMessage,\r\n\tModalActionRowComponentBuilder,\r\n\tModalBuilder,\r\n\tModalSubmitInteraction,\r\n\tStringSelectMenuBuilder,\r\n\tTextChannel,\r\n\tTextInputBuilder,\r\n\tTextInputStyle,\r\n} from \"discord.js\";\r\nimport { BotConfig } from \"@/config\";\r\nimport { ProductProps } from \"@/@shared/sharpify/api\";\r\nimport { formatPrice } from \"@/@shared/lib\";\r\nimport TurndownService from \"turndown\";\r\nimport { DiscordUserEntity, EmojiEntity, ProductEntity } from \"@/@shared/db/entities\";\r\n\r\nimport { WrapperType } from \"@/@shared/types\";\r\n\r\nimport { HandleDiscordMemberNotFound } from \"@/@shared/handlers\";\r\nimport { FindEmojiHelper } from \"@/@shared/helpers\";\r\nimport { getLocalStoreConfig, Sharpify } from \"@/@shared/sharpify\";\r\nimport { BuildRoleConfigure } from \"./_build-role-configure\";\r\n\r\n@Injectable()\r\nexport class RemoveAllRolesComponent {\r\n\tconstructor(\r\n\t\t@Inject(Client) private readonly client: Client,\r\n\t\t@Inject(forwardRef(() => BuildRoleConfigure))\r\n\t\tprivate readonly buildRoleConfigure: WrapperType<BuildRoleConfigure>,\r\n\t) {}\r\n\r\n\t@Button(\"remove_all_roles\")\r\n\tprivate async handleButtonClicked(@Context() [interaction]: [ButtonInteraction]) {\r\n\t\tconst store = await getLocalStoreConfig();\r\n\t\tawait store.updateRoleSettings([]);\r\n\r\n\t\tawait interaction.update((await this.buildRoleConfigure.build()) as any)\r\n\t\t// interaction.reply({\r\n\t\t// \tcontent: \"Todos os cargos foram removidos com successo!\",\r\n\t\t// \tflags: [\"Ephemeral\"],\r\n\t\t// });\r\n\t}\r\n\r\n\tasync createButton() {\r\n\t\tconst RemoveAllRolesButton = new ButtonBuilder()\r\n\t\t\t.setCustomId(`remove_all_roles`) // unique ID to handle clicks\r\n\t\t\t.setLabel(\"Remover todos os cargos\") // text on the button\r\n\t\t\t.setStyle(ButtonStyle.Danger); // gray button, like in the image\r\n\t\treturn { RemoveAllRolesButton };\r\n\t}\r\n}\r\n"],"names":["RemoveAllRolesComponent","handleButtonClicked","interaction","store","getLocalStoreConfig","updateRoleSettings","update","buildRoleConfigure","build","createButton","RemoveAllRolesButton","ButtonBuilder","setCustomId","setLabel","setStyle","ButtonStyle","Danger","client","BuildRoleConfigure"],"mappings":";;;;+BAgDaA;;;eAAAA;;;wBAhDkC;wBAcxC;yBAmBA;uBAOqB;0BAIkB;oCACX;;;;;;;;;;;;;;;AAG5B,IAAA,AAAMA,0BAAN,MAAMA;IAOZ,MACcC,oBAAoB,AAAW,CAACC,YAAiC,EAAE;QAChF,MAAMC,QAAQ,MAAMC,IAAAA,6BAAmB;QACvC,MAAMD,MAAME,kBAAkB,CAAC,EAAE;QAEjC,MAAMH,YAAYI,MAAM,CAAE,MAAM,IAAI,CAACC,kBAAkB,CAACC,KAAK;IAC7D,sBAAsB;IACtB,6DAA6D;IAC7D,yBAAyB;IACzB,MAAM;IACP;IAEA,MAAMC,eAAe;QACpB,MAAMC,uBAAuB,IAAIC,sBAAa,GAC5CC,WAAW,CAAC,CAAC,gBAAgB,CAAC,EAAE,6BAA6B;SAC7DC,QAAQ,CAAC,2BAA2B,qBAAqB;SACzDC,QAAQ,CAACC,oBAAW,CAACC,MAAM,GAAG,iCAAiC;QACjE,OAAO;YAAEN;QAAqB;IAC/B;IAxBA,YACC,AAAiCO,MAAc,EAC/C,AACiBV,kBAAmD,CACnE;aAHgCU,SAAAA;aAEhBV,qBAAAA;IACf;AAqBJ;;;;;;;;;;;;;iEAvB2BW,sCAAkB"}