{"version":3,"sources":["../../../../../../../src/bot/preferences/commands/configure-preferences/components/feedback-public-log/_build-feedback-public-log-section.ts"],"sourcesContent":["import { forwardRef, Inject, Injectable } from \"@nestjs/common\";\r\nimport { Modal, Context, SlashCommand, SlashCommandContext, Ctx, ModalContext } from \"necord\";\r\nimport {\r\n\tActionRowBuilder,\r\n\tCacheType,\r\n\tChatInputCommandInteraction,\r\n\tClient,\r\n\tEmbedBuilder,\r\n\tInteractionReplyOptions,\r\n\tInteractionResponse,\r\n\tMessagePayload,\r\n\tModalActionRowComponentBuilder,\r\n\tModalBuilder,\r\n\tModalSubmitInteraction,\r\n\tTextInputBuilder,\r\n\tTextInputStyle,\r\n} from \"discord.js\";\r\nimport { BotConfig } from \"@/config\";\r\nimport { ProductProps } from \"@/@shared/sharpify/api\";\r\nimport { dotEnv, formatPrice } from \"@/@shared/lib\";\r\nimport TurndownService from \"turndown\";\r\nimport { getLocalStoreConfig } from \"@/@shared/sharpify\";\r\nimport { BuildPreferenceConfigure } from \"../_build-preference-configure\";\r\nimport { SelectFeedbackPublicLogChannel } from \"./select-public-log-channel-section\";\r\nimport { WrapperType } from \"@/@shared/types\";\r\nimport { GoBackButtonComponent } from \"../go-back-button\";\r\nimport { EnableFeedbackPublicLogButton } from \"./enable-public-log-button\";\r\nimport { OnlyDiscordFeebackSalesPublicLogButton } from \"./only-discord-sales.button\";\r\nimport { MinFeedbackStarButton } from \"./min-feedback-star\";\r\n\r\n@Injectable()\r\nexport class BuildFeedbackPublicLogSection {\r\n\tconstructor(\r\n\t\t@Inject(forwardRef(() => SelectFeedbackPublicLogChannel))\r\n\t\tprivate readonly selectFeedbackPublicLogChannel: SelectFeedbackPublicLogChannel,\r\n\t\t@Inject(forwardRef(() => GoBackButtonComponent))\r\n\t\tprivate readonly goBackButtonComponent: GoBackButtonComponent,\r\n\t\t@Inject(forwardRef(() => EnableFeedbackPublicLogButton))\r\n\t\tprivate readonly enableFeedbackPublicLogButton: EnableFeedbackPublicLogButton,\r\n\t\t@Inject(forwardRef(() => OnlyDiscordFeebackSalesPublicLogButton))\r\n\t\tprivate readonly onlyDiscordFeebackSalesPublicLogButton: OnlyDiscordFeebackSalesPublicLogButton,\r\n\t\t@Inject(forwardRef(() => MinFeedbackStarButton))\r\n\t\tprivate readonly minFeedbackStarButton: MinFeedbackStarButton,\r\n\r\n\t\t\r\n\r\n\t\t@Inject(Client) private readonly client: Client,\r\n\t) {}\r\n\tasync build(): Promise<string | InteractionReplyOptions | MessagePayload> {\r\n\t\tconst emmbed = new EmbedBuilder()\r\n\t\t\t.setColor(BotConfig.color)\r\n\t\t\t.setTitle(\"Configurar log de feedback publico\")\r\n\t\t\t.setDescription(\"Cada alteração vai ser automaticamente refletida no bot.\");\r\n\r\n\t\tconst selectChannel = await this.selectFeedbackPublicLogChannel.createSelectChannel();\r\n\t\tconst { goBackButtonButton } = await this.goBackButtonComponent.createButton();\r\n\t\tconst { enableFeedbackPublicLogButton } = await this.enableFeedbackPublicLogButton.createButton();\r\n\t\tconst { onlyDiscordSalesPublicLogButton } = await this.onlyDiscordFeebackSalesPublicLogButton.createButton();\r\n\t\tconst { minFeedbackStarButton } = await this.minFeedbackStarButton.createButton();\r\n\r\n\t\treturn {\r\n\t\t\tembeds: [emmbed],\r\n\t\t\tcomponents: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tcomponents: [enableFeedbackPublicLogButton, onlyDiscordSalesPublicLogButton, minFeedbackStarButton, goBackButtonButton],\r\n\t\t\t\t},\r\n\t\t\t\tselectChannel,\r\n\t\t\t],\r\n\t\t\tflags: [\"Ephemeral\"],\r\n\t\t};\r\n\t}\r\n}\r\n"],"names":["BuildFeedbackPublicLogSection","build","emmbed","EmbedBuilder","setColor","BotConfig","color","setTitle","setDescription","selectChannel","selectFeedbackPublicLogChannel","createSelectChannel","goBackButtonButton","goBackButtonComponent","createButton","enableFeedbackPublicLogButton","onlyDiscordSalesPublicLogButton","onlyDiscordFeebackSalesPublicLogButton","minFeedbackStarButton","embeds","components","type","flags","client","SelectFeedbackPublicLogChannel","GoBackButtonComponent","EnableFeedbackPublicLogButton","OnlyDiscordFeebackSalesPublicLogButton","MinFeedbackStarButton"],"mappings":";;;;+BA+BaA;;;eAAAA;;;wBA/BkC;yBAgBxC;wBACmB;+CAMqB;8BAET;uCACQ;wCACS;iCACjB;;;;;;;;;;;;;;;AAG/B,IAAA,AAAMA,gCAAN,MAAMA;IAiBZ,MAAMC,QAAoE;QACzE,MAAMC,SAAS,IAAIC,qBAAY,GAC7BC,QAAQ,CAACC,iBAAS,CAACC,KAAK,EACxBC,QAAQ,CAAC,sCACTC,cAAc,CAAC;QAEjB,MAAMC,gBAAgB,MAAM,IAAI,CAACC,8BAA8B,CAACC,mBAAmB;QACnF,MAAM,EAAEC,kBAAkB,EAAE,GAAG,MAAM,IAAI,CAACC,qBAAqB,CAACC,YAAY;QAC5E,MAAM,EAAEC,6BAA6B,EAAE,GAAG,MAAM,IAAI,CAACA,6BAA6B,CAACD,YAAY;QAC/F,MAAM,EAAEE,+BAA+B,EAAE,GAAG,MAAM,IAAI,CAACC,sCAAsC,CAACH,YAAY;QAC1G,MAAM,EAAEI,qBAAqB,EAAE,GAAG,MAAM,IAAI,CAACA,qBAAqB,CAACJ,YAAY;QAE/E,OAAO;YACNK,QAAQ;gBAACjB;aAAO;YAChBkB,YAAY;gBACX;oBACCC,MAAM;oBACND,YAAY;wBAACL;wBAA+BC;wBAAiCE;wBAAuBN;qBAAmB;gBACxH;gBACAH;aACA;YACDa,OAAO;gBAAC;aAAY;QACrB;IACD;IAvCA,YACC,AACiBZ,8BAA8D,EAC/E,AACiBG,qBAA4C,EAC7D,AACiBE,6BAA4D,EAC7E,AACiBE,sCAA8E,EAC/F,AACiBC,qBAA4C,EAI7D,AAAiCK,MAAc,CAC9C;aAbgBb,iCAAAA;aAEAG,wBAAAA;aAEAE,gCAAAA;aAEAE,yCAAAA;aAEAC,wBAAAA;aAIgBK,SAAAA;IAC/B;AAyBJ;;;iEAvC2BC,6DAA8B;iEAE9BC,mCAAqB;iEAErBC,oDAA6B;iEAE7BC,8DAAsC;iEAEtCC,sCAAqB"}