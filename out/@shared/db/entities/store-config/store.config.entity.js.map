{"version":3,"sources":["../../../../../src/@shared/db/entities/store-config/store.config.entity.ts"],"sourcesContent":["import { StoreProps } from \"@/@shared/sharpify/api\";\r\nimport { BaseEntity, Column, Entity, PrimaryColumn } from \"typeorm\";\r\n\r\n@Entity(\"storeConfig\")\r\nexport class StoreConfigEntity extends BaseEntity {\r\n\t@PrimaryColumn({ name: \"id\", type: \"text\" })\r\n\tid: string = \"DEFAULT\";\r\n\r\n\t@Column({ name: \"name\", type: \"text\", nullable: false })\r\n\tname!: string;\r\n\r\n\t@Column({ name: \"description\", type: \"text\", nullable: false })\r\n\tdescription!: string;\r\n\r\n\t@Column({ name: \"url\", type: \"text\", nullable: false })\r\n\turl!: string;\r\n\r\n\t@Column({ name: \"image\", type: \"text\", nullable: false })\r\n\timage!: string;\r\n\r\n\t@Column({ name: \"paymentGateways\", type: \"json\", nullable: false, default: \"[]\" })\r\n\tpaymentGateways!: StoreProps.PaymentConfig[];\r\n\r\n\t@Column({ name: \"applyRolesSettings\", type: \"json\", nullable: false, default: \"[]\" })\r\n\tapplyRolesSettings!: StoreConfigEntity.RoleSettings[];\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tstatic createStore(props: StoreProps) {\r\n\t\tconst entity = new StoreConfigEntity();\r\n\t\tentity.updateStoreProps(props);\r\n\t\tentity.applyRolesSettings = [];\r\n\t\treturn entity;\r\n\t}\r\n\r\n\tupdateStoreProps(props: StoreProps) {\r\n\t\tthis.name = props.info.name || \"Sem nome\";\r\n\t\tthis.description = props.info.description || \"Sem descrição\";\r\n\t\tthis.url = props.url || \"https://example.com\";\r\n\t\tthis.image = props.info.image ?? \"https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg\";\r\n\t\tthis.paymentGateways = props.paymentConfigs || [];\r\n\t}\r\n\r\n\tasync updateProps(props: StoreProps) {\r\n\t\tthis.updateStoreProps(props);\r\n\t\tawait this.save();\r\n\t}\r\n\r\n\tasync updateRoleSettings(roleSettings: StoreConfigEntity.RoleSettings[]) {\r\n\t\tthis.applyRolesSettings = roleSettings;\r\n\t\tawait this.save();\r\n\t}\r\n}\r\n\r\nexport namespace StoreConfigEntity {\r\n\texport type Props = {\r\n\t\tid: string;\r\n\t\tname: string;\r\n\t\tdescription: string;\r\n\t\turl: string;\r\n\t\timage: string;\r\n\t\tpaymentGateways: StoreProps.PaymentConfig[];\r\n\t\tapplyRolesSettings: RoleSettings[];\r\n\t};\r\n\r\n\texport type RoleSettings = {\r\n\t\troleId: string;\r\n\t};\r\n}\r\n"],"names":["StoreConfigEntity","BaseEntity","createStore","props","entity","updateStoreProps","applyRolesSettings","name","info","description","url","image","paymentGateways","paymentConfigs","updateProps","save","updateRoleSettings","roleSettings","id","type","nullable","default"],"mappings":";;;;+BAIaA;;;eAAAA;;;yBAH6C;;;;;;;;;;AAGnD,IAAA,AAAMA,oBAAN,MAAMA,0BAA0BC,mBAAU;IA0BhD,OAAOC,YAAYC,KAAiB,EAAE;QACrC,MAAMC,SAAS,IAAIJ;QACnBI,OAAOC,gBAAgB,CAACF;QACxBC,OAAOE,kBAAkB,GAAG,EAAE;QAC9B,OAAOF;IACR;IAEAC,iBAAiBF,KAAiB,EAAE;QACnC,IAAI,CAACI,IAAI,GAAGJ,MAAMK,IAAI,CAACD,IAAI,IAAI;QAC/B,IAAI,CAACE,WAAW,GAAGN,MAAMK,IAAI,CAACC,WAAW,IAAI;QAC7C,IAAI,CAACC,GAAG,GAAGP,MAAMO,GAAG,IAAI;QACxB,IAAI,CAACC,KAAK,GAAGR,MAAMK,IAAI,CAACG,KAAK,IAAI;QACjC,IAAI,CAACC,eAAe,GAAGT,MAAMU,cAAc,IAAI,EAAE;IAClD;IAEA,MAAMC,YAAYX,KAAiB,EAAE;QACpC,IAAI,CAACE,gBAAgB,CAACF;QACtB,MAAM,IAAI,CAACY,IAAI;IAChB;IAEA,MAAMC,mBAAmBC,YAA8C,EAAE;QACxE,IAAI,CAACX,kBAAkB,GAAGW;QAC1B,MAAM,IAAI,CAACF,IAAI;IAChB;IA3BA,aAAc;QACb,KAAK,SArBNG,KAAa;IAsBb;AA0BD;;;QAjDkBX,MAAM;QAAMY,MAAM;;;;;;QAGzBZ,MAAM;QAAQY,MAAM;QAAQC,UAAU;;;;;;QAGtCb,MAAM;QAAeY,MAAM;QAAQC,UAAU;;;;;;QAG7Cb,MAAM;QAAOY,MAAM;QAAQC,UAAU;;;;;;QAGrCb,MAAM;QAASY,MAAM;QAAQC,UAAU;;;;;;QAGvCb,MAAM;QAAmBY,MAAM;QAAQC,UAAU;QAAOC,SAAS;;;;;;QAGjEd,MAAM;QAAsBY,MAAM;QAAQC,UAAU;QAAOC,SAAS"}