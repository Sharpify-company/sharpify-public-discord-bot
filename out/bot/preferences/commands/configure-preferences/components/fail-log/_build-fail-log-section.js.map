{"version":3,"sources":["../../../../../../../src/bot/preferences/commands/configure-preferences/components/fail-log/_build-fail-log-section.ts"],"sourcesContent":["import { forwardRef, Inject, Injectable } from \"@nestjs/common\";\r\nimport { Modal, Context, SlashCommand, SlashCommandContext, Ctx, ModalContext } from \"necord\";\r\nimport {\r\n\tActionRowBuilder,\r\n\tCacheType,\r\n\tChatInputCommandInteraction,\r\n\tClient,\r\n\tEmbedBuilder,\r\n\tInteractionReplyOptions,\r\n\tInteractionResponse,\r\n\tMessagePayload,\r\n\tModalActionRowComponentBuilder,\r\n\tModalBuilder,\r\n\tModalSubmitInteraction,\r\n\tTextInputBuilder,\r\n\tTextInputStyle,\r\n} from \"discord.js\";\r\nimport { BotConfig } from \"@/config\";\r\nimport { ProductProps } from \"@/@shared/sharpify/api\";\r\nimport { dotEnv, formatPrice } from \"@/@shared/lib\";\r\nimport TurndownService from \"turndown\";\r\nimport { getLocalStoreConfig } from \"@/@shared/sharpify\";\r\nimport { BuildPreferenceConfigure } from \"../_build-preference-configure\";\r\nimport { SelectFailLogChannel } from \"./select-fail-log-channel-section\";\r\nimport { WrapperType } from \"@/@shared/types\";\r\nimport { GoBackButtonComponent } from \"../go-back-button\";\r\nimport { EnableFailLogButton } from \"./enable-fail-log-button\";\r\n\r\n@Injectable()\r\nexport class BuildFailLogSection {\r\n\tconstructor(\r\n\t\t@Inject(forwardRef(() => SelectFailLogChannel))\r\n\t\tprivate readonly selectFailLogChannel: SelectFailLogChannel,\r\n\t\t@Inject(forwardRef(() => GoBackButtonComponent))\r\n\t\tprivate readonly goBackButtonComponent: GoBackButtonComponent,\r\n\t\t@Inject(forwardRef(() => EnableFailLogButton))\r\n\t\tprivate readonly enableFailLogButton: EnableFailLogButton,\r\n\r\n\t\t@Inject(Client) private readonly client: Client,\r\n\t) {}\r\n\tasync build(): Promise<string | InteractionReplyOptions | MessagePayload> {\r\n\t\tconst emmbed = new EmbedBuilder().setColor(BotConfig.color).setTitle(\"Configurar log de falhas\").setDescription(`\r\nCada alteração vai ser automaticamente refletida no bot.\r\nCada falha em uma venda será registrada neste canal.\r\nComo exemplo: falhas de pagamento, erros na entrega do produto na DM, etc.\r\n\t\t`);\r\n\r\n\t\tconst selectChannel = await this.selectFailLogChannel.createSelectChannel();\r\n\t\tconst { goBackButtonButton } = await this.goBackButtonComponent.createButton();\r\n\t\tconst { enableFailLogButton } = await this.enableFailLogButton.createButton();\r\n\r\n\t\treturn {\r\n\t\t\tembeds: [emmbed],\r\n\t\t\tcomponents: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tcomponents: [enableFailLogButton, goBackButtonButton],\r\n\t\t\t\t},\r\n\t\t\t\tselectChannel,\r\n\t\t\t],\r\n\t\t\tflags: [\"Ephemeral\"],\r\n\t\t};\r\n\t}\r\n}\r\n"],"names":["BuildFailLogSection","build","emmbed","EmbedBuilder","setColor","BotConfig","color","setTitle","setDescription","selectChannel","selectFailLogChannel","createSelectChannel","goBackButtonButton","goBackButtonComponent","createButton","enableFailLogButton","embeds","components","type","flags","client","SelectFailLogChannel","GoBackButtonComponent","EnableFailLogButton"],"mappings":";;;;+BA6BaA;;;eAAAA;;;wBA7BkC;yBAgBxC;wBACmB;6CAMW;8BAEC;qCACF;;;;;;;;;;;;;;;AAG7B,IAAA,AAAMA,sBAAN,MAAMA;IAWZ,MAAMC,QAAoE;QACzE,MAAMC,SAAS,IAAIC,qBAAY,GAAGC,QAAQ,CAACC,iBAAS,CAACC,KAAK,EAAEC,QAAQ,CAAC,4BAA4BC,cAAc,CAAC,CAAC;;;;EAIjH,CAAC;QAED,MAAMC,gBAAgB,MAAM,IAAI,CAACC,oBAAoB,CAACC,mBAAmB;QACzE,MAAM,EAAEC,kBAAkB,EAAE,GAAG,MAAM,IAAI,CAACC,qBAAqB,CAACC,YAAY;QAC5E,MAAM,EAAEC,mBAAmB,EAAE,GAAG,MAAM,IAAI,CAACA,mBAAmB,CAACD,YAAY;QAE3E,OAAO;YACNE,QAAQ;gBAACd;aAAO;YAChBe,YAAY;gBACX;oBACCC,MAAM;oBACND,YAAY;wBAACF;wBAAqBH;qBAAmB;gBACtD;gBACAH;aACA;YACDU,OAAO;gBAAC;aAAY;QACrB;IACD;IAhCA,YACC,AACiBT,oBAA0C,EAC3D,AACiBG,qBAA4C,EAC7D,AACiBE,mBAAwC,EAEzD,AAAiCK,MAAc,CAC9C;aAPgBV,uBAAAA;aAEAG,wBAAAA;aAEAE,sBAAAA;aAEgBK,SAAAA;IAC/B;AAwBJ;;;iEAhC2BC,iDAAoB;iEAEpBC,mCAAqB;iEAErBC,wCAAmB"}