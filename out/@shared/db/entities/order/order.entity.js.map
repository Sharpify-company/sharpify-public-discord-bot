{"version":3,"sources":["../../../../../src/@shared/db/entities/order/order.entity.ts"],"sourcesContent":["import { OrderProps } from \"@/@shared/sharpify/api\";\r\nimport { BaseEntity, Column, Entity, PrimaryColumn } from \"typeorm\";\r\n\r\n@Entity(\"orders\")\r\nexport class OrderEntity extends BaseEntity {\r\n\t@PrimaryColumn({ name: \"id\", type: \"text\" })\r\n\tid!: string;\r\n\r\n\t@Column({ name: \"orderProps\", type: \"json\" })\r\n\torderProps!: OrderProps;\r\n\r\n\t@Column({ name: \"customerId\", type: \"text\" })\r\n\tcustomerId!: string;\r\n\r\n\t@Column({ name: \"deliveryStatus\", type: \"text\" })\r\n\tdeliveryStatus!: OrderEntity.DeliveryStatus;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tstatic createOrder(props: OrderEntity.Input) {\r\n\t\tconst defaultProps: OrderEntity.Props = {\r\n\t\t\t...props,\r\n\t\t};\r\n\t\tconst entity = new OrderEntity();\r\n\t\tObject.assign(entity, defaultProps);\r\n\t\treturn entity;\r\n\t}\r\n\r\n\tasync markAsDelivered() {\r\n\t\tthis.deliveryStatus = \"DELIVERED\";\r\n\t\tawait this.save();\r\n\t}\r\n\r\n\tasync markAsPreparingDelivery() {\r\n\t\tthis.deliveryStatus = \"PREPARING_DELIVERY\";\r\n\t\tawait this.save();\r\n\t}\r\n\r\n\tasync updateOrderProps(props: OrderProps) {\r\n\t\tthis.orderProps = props;\r\n\t\tawait this.save();\r\n\t}\r\n}\r\n\r\nexport namespace OrderEntity {\r\n\texport const DeliveryStatus = {\r\n\t\tPENDING: \"PENDING\",\r\n\t\tPREPARING_DELIVERY: \"PREPARING_DELIVERY\",\r\n\t\tDELIVERED: \"DELIVERED\",\r\n\t} as const;\r\n\texport type DeliveryStatus = keyof typeof DeliveryStatus;\r\n\r\n\texport type Input = {\r\n\t\tid: string;\r\n\t\torderProps: OrderProps;\r\n\t\tcustomerId: string;\r\n\t\tdeliveryStatus: OrderEntity.DeliveryStatus;\r\n\t};\r\n\r\n\texport type Props = {\r\n\t\tid: string;\r\n\t\torderProps: OrderProps;\r\n\t\tcustomerId: string;\r\n\t\tdeliveryStatus: OrderEntity.DeliveryStatus;\r\n\t};\r\n}\r\n"],"names":["OrderEntity","BaseEntity","createOrder","props","defaultProps","entity","Object","assign","markAsDelivered","deliveryStatus","save","markAsPreparingDelivery","updateOrderProps","orderProps","name","type","DeliveryStatus","PENDING","PREPARING_DELIVERY","DELIVERED"],"mappings":";;;;+BAIaA;;;eAAAA;;;qBAJc;yBAC+B;;;;;;;;;;AAGnD,IAAA,AAAMA,cAAN,MAAMA,oBAAoBC,mBAAU;IAiB1C,OAAOC,YAAYC,KAAwB,EAAE;QAC5C,MAAMC,eAAkC;YACvC,GAAGD,KAAK;QACT;QACA,MAAME,SAAS,IAAIL;QACnBM,OAAOC,MAAM,CAACF,QAAQD;QACtB,OAAOC;IACR;IAEA,MAAMG,kBAAkB;QACvB,IAAI,CAACC,cAAc,GAAG;QACtB,MAAM,IAAI,CAACC,IAAI;IAChB;IAEA,MAAMC,0BAA0B;QAC/B,IAAI,CAACF,cAAc,GAAG;QACtB,MAAM,IAAI,CAACC,IAAI;IAChB;IAEA,MAAME,iBAAiBT,KAAiB,EAAE;QACzC,IAAI,CAACU,UAAU,GAAGV;QAClB,MAAM,IAAI,CAACO,IAAI;IAChB;IA1BA,aAAc;QACb,KAAK;IACN;AAyBD;;;QAvCkBI,MAAM;QAAMC,MAAM;;;;;;QAGzBD,MAAM;QAAcC,MAAM;;;;;;QAG1BD,MAAM;QAAcC,MAAM;;;;;;QAG1BD,MAAM;QAAkBC,MAAM;;yFACX,sDAAA;;;;;;;UA+Bbf;gBACHgB,iBAAiB;QAC7BC,SAAS;QACTC,oBAAoB;QACpBC,WAAW;IACZ;AAgBD,GArBiBnB,gBAAAA"}